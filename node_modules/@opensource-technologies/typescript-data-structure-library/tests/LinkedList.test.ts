import { LinkedList } from '../src/LinkedList';

describe('LinkedList', () => {
  let list: LinkedList<number>;

  beforeEach(() => {
    list = new LinkedList<number>();
  });

  test('initializes an empty list', () => {
    expect(list.toArray()).toEqual([]);
  });

  test('appends elements to the list', () => {
    list.append(1);
    list.append(2);
    list.append(3);
    expect(list.toArray()).toEqual([1, 2, 3]);
  });

  test('prepends elements to the list', () => {
    list.prepend(1);
    list.prepend(2);
    list.prepend(3);
    expect(list.toArray()).toEqual([3, 2, 1]);
  });

  test('removes elements from the list', () => {
    list.append(1);
    list.append(2);
    list.append(3);
    list.remove(2);
    expect(list.toArray()).toEqual([1, 3]);
  });

  test('finds an existing element', () => {
    list.append(1);
    list.append(2);
    list.append(3);
    const node = list.find(2);
    expect(node?.value).toBe(2);
  });

  test('returns null when finding a non-existent element', () => {
    list.append(1);
    list.append(2);
    list.append(3);
    const node = list.find(4);
    expect(node).toBeNull();
  });

  test('insertAt should insert a node at a specific index', () => {
    list.append(1);
    list.append(2);
    list.append(4);
    list.insertAt(3, 2);

    expect(list.toArray()).toEqual([1, 2, 3, 4]);
  });

  test('insertAt should throw an error if index is out of bounds', () => {
    expect(() => list.insertAt(1, -1)).toThrow('Index out of bounds');
    expect(() => list.insertAt(1, 1)).toThrow('Index out of bounds');
  });

  test('length should return the correct length of the list', () => {
    expect(list.length()).toBe(0);
    list.append(1);
    list.append(2);
    expect(list.length()).toBe(2);
  });

  test('reverse should reverse the list', () => {
    list.append(1);
    list.append(2);
    list.append(3);
    list.reverse();

    expect(list.toArray()).toEqual([3, 2, 1]);
  });

  test('isEmpty should return true if the list is empty', () => {
    expect(list.isEmpty()).toBe(true);
    list.append(1);
    expect(list.isEmpty()).toBe(false);
  });

  test('clear should clear the list', () => {
    list.append(1);
    list.append(2);
    list.clear();

    expect(list.isEmpty()).toBe(true);
    expect(list.toArray()).toEqual([]);
  });
});
